# Background Services and Model Dependencies

## Database Models and Enums Used Across Background Services

### Core Model Files [SHARED]
- `src/models/place.py` - Contains `Place` model with table `places` (Used in WF1, WF2)
- `src/models/place_search.py` - Contains `PlaceSearch` model with table `place_searches` (Used in WF1)
- `src/models/local_business.py` - Contains `LocalBusiness` model with table `local_businesses` (Used in WF2, WF3, WF4)
- `src/models/domain.py` - Contains `Domain` model with table `domains` (Used in WF3, WF4, WF5, WF6)
- `src/models/sitemap.py` - Contains `SitemapFile` model with table `sitemap_files` (Used in WF5, WF6)
- `src/models/page.py` - Contains `Page` model with table `pages` (Used in WF6)

### Enum Definitions [SHARED]
- `src/models/place.py` - Contains status enums for Places (`PlaceStatusEnum`, `DeepScanStatusEnum`) (Used in WF1, WF2, WF3)
- `src/models/local_business.py` - Contains status enums for LocalBusiness (`DomainExtractionStatusEnum`) (Used in WF3, WF4)
- `src/models/domain.py` - Contains status enums for Domain (`SitemapCurationStatusEnum`, `SitemapAnalysisStatusEnum`) (Used in WF4, WF5)
- `src/models/sitemap.py` - Contains status enums for SitemapFile (`SitemapImportCurationStatusEnum`, `SitemapImportProcessStatusEnum`) (Used in WF5, WF6)
- `src/models/page.py` - Contains status enums for Page (`PageStatusEnum`) (Used in WF6)
- `src/models/enums.py` - Contains additional shared enum definitions
- `src/models/api_models.py` - Contains API validation enum classes

## Background Service Components

5A. Domain Scheduler (Background Service)
  - `src/services/domain_scheduler.py`
  - `src/config/settings.py`
  - `src/models/domain.py`
  - `src/models/enums.py`
  - `src/scheduler_instance.py`
    - `src/scraper/domain_utils.py`
    - 5A1 (pending): `src/scraper/metadata_extractor.py`  
      *Extracts website metadata such as CMS, emails, social media links, logos, and contact info using aiohttp and BeautifulSoup. Used for enrichment and analysis.*
src/session/async_session.py
5A(b). Domain Sitemap Submission Scheduler
  - `src/services/domain_sitemap_submission_scheduler.py`
  - `src/config/settings.py`
  - `src/models/domain.py`
  - `src/services/domain_to_sitemap_adapter_service.py`
  - `src/session/async_session.py`
  - `src/scheduler_instance.py`
8A. Local Business Enrichment (Background Service)
  - `src/services/places/places_search_service.py`
  - `src/config/settings.py`
  - `src/models/place_search.py`
  - `src/services/places/places_storage_service.py`
  - `src/services/job_service.py`
  - `src/session/async_session.py`
10A. Sitemap Scheduler (Background Service)
  - `src/services/sitemap_scheduler.py`
    - `src/config/settings.py`
    - `src/models/job.py`
    - `src/models/local_business.py`
    - `src/models/place.py`
    - `src/scheduler_instance.py`
    - `src/services/business_to_domain_service.py`
    - `src/services/job_service.py`
    - `src/services/places/places_deep_service.py`
    - `src/services/sitemap/processing_service.py`
    - `src/session/async_session.py`
10A(b). Sitemap Deep Scan Jobs
  - `src/services/sitemap_scheduler.py`
    - `src/config/settings.py`
    - `src/models/job.py`
    - `src/models/local_business.py`
    - `src/models/place.py`
    - `src/scheduler_instance.py`
    - `src/services/business_to_domain_service.py`
    - `src/services/job_service.py`
    - `src/services/places/places_deep_service.py`
    - `src/services/sitemap/processing_service.py`
    - `src/session/async_session.py`
13A. Sitemap Import Scheduler (Background Service)