# Domain Content Extraction – **Launch Checklist**

> One‑page gatekeeper for any PR or AI‑generated job that implements the **Domain‑Content‑Extraction** service.
> Tick every box **before** merging to `main`.  All file paths are repo‑relative.

| ✔ | Step                                                                                                                                                                                                                                                        | Reference                                                                                                                                                                                                                                                                                                                                                                                            |
| - | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ☐ | **Read foundational docs**                                                                                                                                                                                                                                  | • `Docs_6_Architecture_and_Status/00-30000-FT-PROJECT-OVERVIEW.md`  <br>• `Docs_8_Document-X/8.0-AI-COLLABORATION-CONSTITUTION.md`  <br>• `Docs_9_Constitution/Domain-Content-Extraction-Constitution.md`  <br>• `Docs_1_AI_GUIDES/32-PRODUCER_CONSUMER_WORKFLOW_PATTERN.md`  <br>• `Docs_1_AI_GUIDES/11-AUTHENTICATION_BOUNDARY.md`  <br>• `Docs_1_AI_GUIDES/28-SCHEDULER_AND_SETTINGS_PATTERNS.md` |
| ☐ | **Create & apply DB migration** named `migrations/2025-05-XX_domain_content.sql`.  Must add enum rows & tables exactly as Constitution Phase 1 specifies.                                                                                                   | Constitution → Phase 1                                                                                                                                                                                                                                                                                                                                                                               |
| ☐ | **Scaffold code** using filenames from Cheat‑Sheet stubs (do *not* invent new names):  <br>• `src/services/domain_content_service.py`  <br>• `src/api/v3/domain_content_router.py`  <br>• `src/schedulers/domain_content_scheduler.py`                      | `Docs_8_Document-X/ScraperSky Workflow-Builder-Cheat-Sheet-TEMPLATE-Enhanced.md`                                                                                                                                                                                                                                                                                                                     |
| ☐ | **Import runtime constants**  *(no magic numbers)*  <br>`from src.config.settings import settings`                                                                                                                                                          | `src/config/settings.py`                                                                                                                                                                                                                                                                                                                                                                             |
| ☐ | **Set up logging** via  <br>`from src.config.logging_config import setup_logging`  <br>and call `setup_logging()` in service & scheduler entrypoints.                                                                                                       | `src/config/logging_config.py`                                                                                                                                                                                                                                                                                                                                                                       |
| ☐ | **API routes** live under `/api/v3/domain-content`, protected with JWT boundary:  <br>`from fastapi import Depends`  <br>`from core.security import jwt_required`  <br>`router = APIRouter(prefix="/domain-content", dependencies=[Depends(jwt_required)])` | `Docs_1_AI_GUIDES/15-API_STANDARDIZATION_GUIDE.md` & `11-AUTHENTICATION_BOUNDARY.md`                                                                                                                                                                                                                                                                                                                 |
| ☐ | **Unit tests** prove:  <br>1) dual‑status update;  <br>2) scheduler picks up `Queued` rows;  <br>3) failure writes `last_error`.                                                                                                                            | `Docs_1_AI_GUIDES/22-TESTING_CONVENTIONS_GUIDE.md`                                                                                                                                                                                                                                                                                                                                                   |
| ☐ | `make lint` *and* `make test` pass locally **and** in CI.                                                                                                                                                                                                   | project root `Makefile`                                                                                                                                                                                                                                                                                                                                                                              |

---

### Verification queries (run in Supabase SQL editor)

```sql
-- Confirm enum rows
select * from pg_enum where enumlabel in ('Processing', 'Queued', 'Failed', 'Completed');

-- Ensure no orphaned rows
select * from domain_content where processing_status = 'Queued' and curation_status != 'Selected';
```

---

### Done?  Merge with commit title:

```
feat(domain-content): implement service, router & scheduler (Launch Checklist ✔)
```
