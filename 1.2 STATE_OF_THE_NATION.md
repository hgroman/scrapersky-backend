# STATE OF THE NATION: ScraperSky MVP Workflow Analysis

**Date:** August 24, 2025  
**Status:** ANALYSIS REQUIRED - SEEKING BACKEND TRUTH

---

## EXECUTIVE SUMMARY

Critical confusion exists between frontend tab structure and actual backend workflow implementation. The ScraperSky MVP page shows 7 tabs, user references 7 workflows (WF1-WF7 with WF7 unbuilt), but the mapping between frontend components and backend API workflows is unclear. **FastAPI documentation must be interrogated as the source of truth.**

---

## CURRENT KNOWN STATE

### Frontend: MVP Page Tab Structure
Based on `/src/pages/MVP.tsx`:

1. **Single Search** â†’ `SingleSearchForm` component
2. **Staging Editor** â†’ `StagingEditor` component  
3. **Local Business Curation** â†’ `LocalBusinessCuration` component
4. **Domain Curation** â†’ `DomainCuration` component
5. **Sitemap Curation** â†’ `SitemapCuration` component (claimed WF6)
6. **Batch Search** â†’ `BatchSearch` component
7. **Results Viewer** â†’ `ResultsViewer` component

### Backend: Known API Endpoints
From `https://scrapersky-backend.onrender.com`:

#### WF6 Sitemap Processing (CONFIRMED WORKING)
- `GET /api/v3/sitemap-files/` - List sitemap files
- `PUT /api/v3/sitemap-files/sitemap_import_curation/status` - Batch status updates
- `POST /api/v3/api/v3/sitemap/batch/create` - Batch processing
- `GET /api/v3/api/v3/sitemap/batch/status/{batch_id}` - Status tracking

#### Local Business Search
- `POST /api/v3/localminer-discoveryscan/search/places` - Start search
- `GET /api/v3/localminer-discoveryscan/search/status/{job_id}` - Check status
- `GET /api/v3/localminer-discoveryscan/search/history` - Search history

#### Places Management
- `GET /api/v3/places/staging` - Staging data
- `PUT /api/v3/places/staging/status` - Update staging status
- `POST /api/v3/places/batch-search` - Batch search
- `GET /api/v3/places/batch-status/{batch_id}` - Batch status

### Component-to-API Mapping (PARTIAL)
- **Sitemap Curation** â†’ WF6 sitemap endpoints âœ… CONFIRMED
- **Single Search** â†’ localminer-discoveryscan endpoints (likely WF?)
- **Batch Search** â†’ places batch endpoints (likely WF?)
- **Staging Editor** â†’ places staging endpoints (likely WF?)
- **Results Viewer** â†’ localminer results endpoints (likely WF?)

---

## CRITICAL KNOWLEDGE GAPS

### ðŸš¨ WORKFLOW IDENTITY CRISIS
- **User Statement:** 7 workflows total (WF1-WF7), WF7 not built yet
- **Frontend Reality:** 7 tabs exist in MVP page
- **Backend Reality:** UNKNOWN workflow structure
- **Question:** Which frontend tabs correspond to which WF numbers?

### ðŸš¨ BACKEND API SCOPE UNKNOWN
- **Known:** WF6 sitemap functionality confirmed working
- **Unknown:** Complete inventory of workflow-specific API groups
- **Unknown:** Official workflow numbering system in backend
- **Unknown:** Which endpoints belong to which workflows

### ðŸš¨ COMPONENT PURPOSE CONFUSION
Several components exist but their workflow identity is unclear:
- **Domain Curation** - Which workflow? What backend APIs?
- **Local Business Curation** - Is this separate from Single Search?
- **Results Viewer** - Standalone tool or part of existing workflow?

---

## REQUIRED BACKEND INVESTIGATION

**FastAPI Documentation Analysis Required:** `https://scrapersky-backend.onrender.com/docs`

### Primary Questions for API Documentation:
1. **Workflow Structure Discovery**
   - Are there endpoint patterns like `/api/v3/workflow1/`, `/api/v3/workflow2/`?
   - How many distinct workflow API groups exist?
   - What is the official workflow numbering system?

2. **Endpoint-to-Workflow Mapping**
   - Which workflow do `localminer-discoveryscan` endpoints belong to?
   - Which workflow do `places` endpoints belong to?
   - Which workflow do `domains` endpoints belong to?
   - Are there other workflow endpoint groups not yet discovered?

3. **Component Validation**
   - Which frontend components have corresponding backend APIs?
   - Which components are UI-only tools vs full workflows?
   - Are all 7 MVP tabs backed by distinct workflow APIs?

### Secondary Investigation:
4. **WF7 Status** - Is there any evidence of WF7 development in progress?
5. **API Versioning** - Are there v1, v2 endpoints that represent older workflows?
6. **Authentication Patterns** - Do all workflows use the same auth structure?

---

## CRITICAL DECISIONS PENDING

### Immediate Actions Required:
1. **Complete FastAPI documentation analysis** - Build definitive workflow inventory
2. **Map frontend components to backend workflows** - Establish true tab-to-workflow relationships  
3. **Validate WF6 positioning** - Confirm if Sitemap Curation should be 6th tab
4. **Identify missing workflows** - Determine which WF1-WF5 are implemented

### Strategic Questions:
- Should frontend tab order match workflow numbering (WF1=tab1, WF2=tab2, etc.)?
- Are some tabs utility components rather than full workflows?
- What is the roadmap for completing WF7?

---

## CONCLUSION

**The FastAPI backend documentation is the authoritative source of truth.** Until we have complete visibility into the backend workflow structure, any frontend organizational decisions are based on incomplete information.

**NEXT ACTION:** Comprehensive analysis of `https://scrapersky-backend.onrender.com/docs` to build the definitive workflow-to-API mapping and resolve the current confusion.

---

*Document Status: DRAFT - Awaiting Backend Truth Discovery*